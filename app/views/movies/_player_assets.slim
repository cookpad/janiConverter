css:
  .hide{display:none;height:0!important;opacity:0}.movie{width:320px;height:180px;}
javascript:
  window.onload = function(e) {
  var define,requireModule,require,requirejs;!function(){function a(a,b){if("."!==a.charAt(0))return a;var c=a.split("/"),d=b.split("/");d.length>1&&(d=d.slice(0,-1));for(var e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}var b={},c={},d={},e=!1;define=function(a,c,d){b[a]={deps:c,callback:d}},requirejs=require=requireModule=function(f){if(d[f]!==e&&c.hasOwnProperty(f))return c[f];if(!b.hasOwnProperty(f))throw new Error("Could not find module "+f);var g,h,i=b[f],j=i.deps,k=i.callback,l=[],m=!1;c[f]={};try{for(var n=0,o=j.length;o>n;n++)l.push("exports"===j[n]?g={}:requireModule(a(j[n],f)));h=k.apply(this,l),m=!0}finally{m||(d[f]=e)}return c[f]=g||h},requirejs.entries=requirejs._eak_seen=b,requirejs.clear=function(){requirejs.entries=requirejs._eak_seen=b={},c={}}}();
  define("multiSceneMovie/appearanceDetector",["exports"],function(a){"use strict";var b;b=function(){function a(a,b,c){this.element=a,this.topMargin=b,this.bottomMargin=c,this.wasVisible=!1,this.detect()}return a.prototype.viewportHeight=function(){return window.innerHeight},a.prototype.viewportTop=function(){return window.scrollY},a.prototype.viewportBottom=function(){return this.viewportHeight()},a.prototype.elementTop=function(){return this.element.getBoundingClientRect().top},a.prototype.elementBottom=function(){return this.element.getBoundingClientRect().bottom},a.prototype.topVisible=function(){return this.elementTop()+this.topMargin>0&&this.elementTop()+this.topMargin<this.viewportBottom()},a.prototype.bottomVisible=function(){return this.elementBottom()-this.bottomMargin>0&&this.elementBottom()-this.bottomMargin<this.viewportBottom()},a.prototype.visible=function(){return this.topVisible()&&this.bottomVisible()},a.prototype.didAppear=function(){},a.prototype.didDisappear=function(){},a.prototype.detect=function(){var a;return a=this.visible(),a?this.wasVisible||this.didAppear():this.wasVisible&&this.didDisappear(),this.wasVisible=a},a}(),a["default"]=b}),define("multiSceneMovie/beacon",["multiSceneMovie/requestBuffer","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a){var b;b=new d,b.push(a)}return a}(),b["default"]=c}),define("multiSceneMovie/eventEmitter",["exports"],function(a){"use strict";var b;b=function(){function a(b){var c;if(a.instances||(a.instances=[]),!b)throw"please set root element for event emitting";return(c=a.instances.filter(function(a){return a.element===b})[0])?c:(this.element=b,void a.instances.push(this))}return a.prototype.emit=function(a,b){var c,d;if("object"==typeof b)return"object"==typeof CustomEvent?this.element.dispatchEvent(new CustomEvent(a,{detail:b})):(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,!1,!1,b),this.element.dispatchEvent(d));try{return this.element.dispatchEvent(new Event(a))}catch(e){return c=e,d=document.createEvent("CustomEvent"),d.initEvent(a,!1,!1),this.element.dispatchEvent(d)}},a.prototype.listen=function(a,b){return this.element.addEventListener(a,b,!1)},a}(),a["default"]=b}),define("multiSceneMovie/frameRectangle",["exports"],function(a){"use strict";var b;b=function(){function a(a,b){this.leftPosition=a,this.topPosition=b}return a.prototype.backgroundPositionText=function(){return""+this.leftPosition+"px "+this.topPosition+"px"},a}(),a["default"]=b}),define("multiSceneMovie/masterCompanionMovie",["multiSceneMovie/multiSceneMovie","multiSceneMovie/eventEmitter","exports"],function(a,b,c){"use strict";var d,e=a["default"],f=b["default"];d=function(){function a(a,b,c,d){null==c&&(c=0),null==d&&(d=0),this.masterMovie=new e(a,c,d),this.companionMovie=new e(b,c,d),this.composeMovies(),this.masterMovie.bindEvent("movie:started",function(a){return function(){return a.triggerEvent("movie:started")}}(this)),this.masterMovie.bindEvent("movie:finished",function(a){return function(){return a.triggerEvent("movie:finished")}}(this)),this.companionMovie.bindEvent("movie:finished",function(a){return function(){return a.triggerEvent("movie:finished")}}(this))}var b;return a.prototype.bindEvent=function(a,c){return b().listen(a,c)},a.prototype.triggerEvent=function(a){return b().emit(a)},a.prototype.composeMovies=function(){return this.masterMovie.bindEvent("movie:loaded",function(a){return function(){return a.companionMovie.startScenes()}}(this)),this.masterMovie.bindEvent("movie:paused",function(a){return function(b){return a.companionMovie.playMovieAtIndex(b.detail.index),a.companionMovie.triggerEvent("movie:play")}}(this))},b=function(){return new f(document.getElementsByTagName("body")[0])},a.prototype.start=function(){return this.masterMovie.startScenes()},a}(),c["default"]=d}),define("multiSceneMovie/movie",["multiSceneMovie/screen","multiSceneMovie/strip","exports"],function(a,b,c){"use strict";var d,e=a["default"],f=b["default"],g=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a,b,c){this.screen=a,this.strips=b,this.fps=c,this.loadMovie=g(this.loadMovie,this),this.screen.setStrips(this.strips),this._loaded=0,this.currentFrameIndex=0,this.currentTimeCodeInSeconds=0,this.currentTimeCodeInSecondsWas=0,this.framesCount=this.strips.reduce(function(a,b){return a+b.framesCount},0),this.strips.forEach(function(a){return function(b){return b.stripImageDidLoad=function(){return a._loaded+=1,a._loaded===Math.ceil(a.strips.length/3)?a.movieDidLoad():void 0}}}(this))}return a.prototype.loadMovie=function(){return this.strips.forEach(function(a){return a.loadStripImage()})},a.prototype.moveFrameIndex=function(){return this.currentFrameIndex++,this.currentTimeCodeInSecondsWas=this.currentTimeCodeInSeconds,this.currentTimeCodeInSeconds=Math.floor(this.currentFrameIndex/this.fps),this.currentFrameIndex===Math.floor(this.framesCount/4)&&this.firstQuartile(),this.currentFrameIndex===Math.floor(this.framesCount/2)&&this.half(),this.currentFrameIndex===Math.floor(this.framesCount/4*3)&&this.thirdQuartile(),this.currentTimeCodeInSecondsWas!==this.currentTimeCodeInSeconds?this.movieDidPlayedTo(this.currentTimeCodeInSeconds):void 0},a.prototype.play=function(){return this.timerId?void 0:(this.isAtFirstFrame()?this.movieDidStart():this.movieDidResume(),this.timerId=setInterval(function(a){return function(){return a.isAtLastFrame()&&(a.pause(),a.screen.currentStrip().deactivate(),a.screen.currentStripIndex=0,a.screen.currentStrip().activate(),a.movieDidFinish()),a.screen.showCurrentFrame(),a.screen.moveFrameToNext(),a.moveFrameIndex()}}(this),1e3/this.fps))},a.prototype.pause=function(){return this.isAtLastFrame()||this.movieDidPause(),this.timerId&&clearInterval(this.timerId),this.timerId=void 0},a.prototype.rewind=function(){return this.screen.moveFrameToFirst(),this.currentFrameIndex=0,this.currentTimeCodeInSeconds=0,this.currentTimeCodeInSecondsWas=0},a.prototype.moveToFrameIndex=function(a){var b,c;for(this.pause(),this.screen.currentStrip().resetFrame(),this.screen.currentStrip().deactivate(),b=a,c=0;b>this.strips[c].framesCount;)b-=this.strips[c].framesCount,c++;return this.screen.currentStripIndex=c,this.screen.currentStrip().resetFrame(),this.screen.currentStrip().frameIndex=b,this.screen.currentStrip().activate(),this.screen.showCurrentFrame(),this.currentFrameIndex=a},a.prototype.isAtFirstFrame=function(){return this.screen.isAtFirstFrame()},a.prototype.isAtLastFrame=function(){return this.screen.isAtLastFrame()},a.prototype.movieDidLoad=function(){},a.prototype.movieDidStart=function(){},a.prototype.movieDidResume=function(){},a.prototype.movieDidPause=function(){},a.prototype.movieDidFinish=function(){},a.prototype.movieDidPlayedTo=function(){},a.prototype.firstQuartile=function(){},a.prototype.half=function(){},a.prototype.thirdQuartile=function(){},a.createFromHTMLElement=function(b,c){var d,g,h,i,j,k,l,m;for(g=b.dataset,k=parseInt(g.frameWidth,10),d=parseInt(g.frameHeight,10),h=new e(b),h.element.style.width=k,h.element.style.height=d,j=[],l=0,m=c.length;m>l;l++)i=c[l],j.push(new f(i.dataset.url,k,d,parseInt(i.dataset.framesCount,10),i));return new a(h,j,parseInt(g.fps,10))},a}(),c["default"]=d}),define("multiSceneMovie/multiSceneMovie",["multiSceneMovie/movie","multiSceneMovie/stage","multiSceneMovie/scene","multiSceneMovie/eventEmitter","multiSceneMovie/beacon","exports"],function(a,b,c,d,e,f){"use strict";var g,h=a["default"],i=b["default"],j=c["default"],k=d["default"],l=e["default"];g=function(){function a(a,b,c){this.rootElement=a,this.appearanceDetectorMarginTop=null!=b?b:0,this.appearanceDetectorMarginBottom=null!=c?c:0,this.createAndComposeScenes()}var b,c;return a.prototype.startScenes=function(){return this.scenes[0].start(),this.triggerEvent("movie:play")},a.prototype.bindEvent=function(a,b){return this.getEventEmitter().listen(a,b)},a.prototype.triggerEvent=function(a){return this.getEventEmitter().emit(a)},a.prototype.getEventEmitter=function(){return new k(this.rootElement)},a.prototype.playMovieAtIndex=function(a){return this.movie?(this.movie.moveToFrameIndex(a),this.triggerEvent("movie:play")):void 0},b=function(a,b,c,d,e,f){var g,h,i,j,m,n,o,p;for(h=new k(a),g=function(a,b){switch(a){case"creative_view":return h.listen("movie:screen:appeared",function(){return new l(b)});case"start":return h.listen("movie:started",function(){return new l(b)});case"first_quartile":return h.listen("movie:played:firstQuartile",function(){return new l(b)});case"mid_point":return h.listen("movie:played:half",function(){return new l(b)});case"third_quartile":return h.listen("movie:played:thirdQuartile",function(){return new l(b)});case"complete":return h.listen("movie:finished",function(){return new l(b)})}},p=a.getElementsByClassName("tracking"),n=0,o=p.length;o>n;n++)j=p[n],g(j.dataset.event,j.dataset.url);return i=c.stage,i.movie=b,b.movieDidLoad=function(){return h.emit("movie:loaded")},b.movieDidStart=function(){return h.emit("movie:started")},b.movieDidPause=function(){return h.emit("movie:paused",{index:b.currentFrameIndex})},b.movieDidResume=function(){return h.emit("movie:resumed")},b.movieDidFinish=function(){return h.emit("movie:finished")},b.movieDidPlayedTo=function(a){return h.emit("movie:played:"+a)},b.firstQuartile=function(){return h.emit("movie:played:firstQuartile")},b.half=function(){return h.emit("movie:played:half")},b.thirdQuartile=function(){return h.emit("movie:played:thirdQuartile")},i.appearanceDetector.didAppear=function(){return h.emit("movie:screen:appeared")},i.appearanceDetector.didDisappear=function(){return h.emit("movie:screen:disappeared")},h.listen("movie:loaded",d.finish),h.listen("movie:finished",function(){return b.rewind(),b.pause()}),h.listen("movie:finished",c.finish),h.listen("movie:finished",e.start),h.listen("movie:screen:appeared",function(){return i.isOpen()?b.play():void 0}),h.listen("movie:screen:disappeared",function(){return b.pause()}),h.listen("movie:play",function(){return i.isOpen()?b.play():void 0}),h.listen("movie:pause",function(){return b.pause()}),h.listen("movie:resume",function(){return i.isOpen()?b.play():void 0}),h.listen("movie:rewind",function(){return i.isOpen()?b.rewind():void 0}),d.sceneDidStart=b.loadMovie,d.sceneDidFinish=c.start,c.sceneDidStart=function(){var a;return b.rewind(),("function"==typeof(a=i.detectAppearance()).bind?a.bind(i):void 0)?b.play():void 0},c.sceneDidFinish=f.start,document.addEventListener("scroll","function"==typeof(m=i.detectAppearance).bind?m.bind(i):void 0,!1),e.stage.element.addEventListener("click",function(){return h.emit("movie:replay")},!1),h.listen("movie:replay",function(){return f.stage.close(),e.finish(),c.start(),h.emit("movie:replayed")})},a.prototype.createAndComposeScenes=function(){var a,d,e,f,g,l,m,n,o,p,q,r,s;return this.rootElement=c(this.rootElement),this.rootElement&&(new k(this.rootElement),r=this.rootElement.dataset,r&&(n=this.rootElement.getElementsByClassName(r.loadingStage)[0],l=this.rootElement.getElementsByClassName(r.finishedStage)[0],a=this.rootElement.getElementsByClassName(r.contentStage)[0],g=this.rootElement.getElementsByClassName(r.movieStage)[0].dataset,q=this.rootElement.getElementsByClassName(g.screen)[0],s=this.rootElement.getElementsByClassName(g.stripsContainer)[0].getElementsByClassName(g.strips),q))?(f=h.createFromHTMLElement(q,s),this.movie=f,e=function(a){return function(b){return new j(new i(b,a.appearanceDetectorMarginTop,a.appearanceDetectorMarginBottom))}}(this),p=e(q),o=e(n),m=e(l),d=e(a),b(this.rootElement,f,p,o,m,d),this.scenes=[o,p,m,d]):void 0},c=function(a){var b;return a?(b=void 0,b="string"==typeof a?document.getElementById(a):a.selector?a[0]:a):void 0},a}(),f["default"]=g}),define("multiSceneMovie/requestBuffer",["exports"],function(a){"use strict";var b;b=function(){function a(){this.queue=[],this.xhr=null}return a.prototype.push=function(a){return this.queue.push(a),1===this.queue.length?this.run():void 0},a.prototype.run=function(){var a;return a=function(a){return function(){return a.queue.length>0?a.run():void 0}}(this),this.requestHandler(a)},a.prototype.requestHandler=function(a){var b,c;this.xhr||(this.xhr=window.XDomainRequest?new XDomainRequest:new XMLHttpRequest),this.xhr.addEventListener("load",function(b){return function(){return b.queue.shift(),a(),b.xhr.removeEventListener("load",arguments,!1)}}(this),!1);try{return c=this.queue[0],this.xhr.open("GET",c),this.xhr.send(null),this.xhr.onerror=function(){var a;return a=document.createElement("img"),a.width=0,a.height=0,a.style.display="none",a.src=c,document.getElementsByTagName("body")[0].appendChild(a)}}catch(d){b=d}},a}(),a["default"]=b}),define("multiSceneMovie/scene",["exports"],function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function a(a){this.stage=a,this.finish=c(this.finish,this),this.start=c(this.start,this)}return a.prototype.sceneDidStart=function(){},a.prototype.sceneDidFinish=function(){},a.prototype.start=function(){return this.stage.open(),this.sceneDidStart()},a.prototype.finish=function(){return this.stage.close(),this.sceneDidFinish()},a}(),a["default"]=b}),define("multiSceneMovie/screen",["exports"],function(a){"use strict";var b;b=function(){function a(a){this.element=a,this.element.style.position="relative",this.element.style.overflow="hidden",this.setDefaultImage()}return a.prototype.setStrips=function(a){return this.strips=a,this.currentStripIndex=0,this.currentStrip().activate()},a.prototype.setDefaultImage=function(){var a;return this.defaultImageUrl()?(a=this.element.style.cssText,this.element.style.cssText=a+("background-image: url("+this.defaultImageUrl()+"); background-size: cover;　background-repeat: no-repeat;")):void 0},a.prototype.defaultImageUrl=function(){var a;return a=this.element.dataset.defaultImage,""===a?void 0:a},a.prototype.showCurrentFrame=function(){return this.currentStrip().moveToCurrentFrame()},a.prototype.currentStrip=function(){return this.strips[this.currentStripIndex]},a.prototype.moveFrameToNext=function(){return this.currentStrip().isAtLastFrame()&&this.moveStripToNext(),this.currentStrip().moveFrameToNext()},a.prototype.moveStripToNext=function(){return this.currentStrip().resetFrame(),this.currentStrip().deactivate(),this.currentStrip()!==this.strips[this.strips.length-1]&&this.currentStripIndex++,this.currentStrip().resetFrame(),this.currentStrip().activate()},a.prototype.moveFrameToFirst=function(){return this.currentStrip().deactivate(),this.currentStripIndex=0,this.currentStrip().frameIndex=0,this.currentStrip().activate(),this.currentStrip().moveToCurrentFrame()},a.prototype.isAtFirstFrame=function(){return this.currentStrip()!==this.strips[0]?!1:0===this.currentStrip().frameIndex?!0:!1},a.prototype.isAtLastFrame=function(){return this.currentStrip()!==this.strips[this.strips.length-1]?!1:this.currentStrip().isAtLastFrame()?!0:!1},a}(),a["default"]=b}),define("multiSceneMovie/stage",["multiSceneMovie/appearanceDetector","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a,b,c){this.element=a,this.appearanceDetectorMarginTop=b,this.appearanceDetectorMarginBottom=c,this.appearanceDetector=new d(this.element,this.appearanceDetectorMarginTop,this.appearanceDetectorMarginBottom)}return a.prototype.stageDidAppear=function(){},a.prototype.stageDidDisapper=function(){},a.prototype.detectAppearance=function(){return this.appearanceDetector.detect()},a.prototype.open=function(){return this.detectAppearance(),this.element.classList.remove("hide")},a.prototype.close=function(){return this.element.classList.add("hide")},a.prototype.isOpen=function(){return!this.isClose()},a.prototype.isClose=function(){return this.element.classList.contains("hide")},a}(),b["default"]=c}),define("multiSceneMovie/strip",["multiSceneMovie/frameRectangle","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a,b,c,d,e){this.image_uri=a,this.frameWidth=b,this.frameHeight=c,this.framesCount=d,this.element=e,this.initializeStyles(),this.initializeFrames(),this.initializeStripImages()}return a.prototype.initializeStyles=function(){return this.element.style.position="absolute"},a.prototype.initializeFrames=function(){var a,b,c;for(this.frames=[],a=b=0,c=this.framesCount-1;c>=0?c>=b:b>=c;a=c>=0?++b:--b)this.frames.push(new d(0,this.frameHeight*a));return this.frameIndex=0},a.prototype.initializeStripImages=function(){return this.stripImageElement=this.element.getElementsByTagName("img")[0],this.stripImageElement.style.width=""+this.frameWidth+"px",this.stripImageElement.style.height=""+this.frameHeight*this.framesCount+"px"},a.prototype.currentFrame=function(){return this.frames[this.frameIndex]},a.prototype.moveFrameToNext=function(){return this.frameIndex++},a.prototype.isAtLastFrame=function(){return this.frameIndex===this.framesCount-1},a.prototype.stripImageDidLoad=function(){},a.prototype.loadStripImage=function(){return this.stripImageElement.addEventListener("load",this.stripImageDidLoad,!1),this.stripImageElement.src=this.image_uri},a.prototype.activate=function(){return this.element.classList.remove("hide")},a.prototype.deactivate=function(){return this.element.classList.add("hide")},a.prototype.moveToCurrentFrame=function(){return this.currentFrame()||this.initializeFrames(),this.element.style.top=""+-1*this.currentFrame().topPosition+"px",this.element.style.left=""+-1*this.currentFrame().leftPosition+"px"},a.prototype.resetFrame=function(){return this.frameIndex=0,this.moveToCurrentFrame()},a}(),b["default"]=c});
  var MultiSceneMovie = require("multiSceneMovie/multiSceneMovie")["default"];
  window.app = new MultiSceneMovie(document.getElementsByClassName("stages_container")[0], 90, 40);
  app.startScenes();
  }
